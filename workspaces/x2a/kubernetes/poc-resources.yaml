# X2A POC Kubernetes Resources
# Apply with: kubectl apply -f poc-resources.yaml
# Note: Namespace 'rhdh' should be created by RHDH operator

---
# PersistentVolumeClaim for source code shared across migration jobs
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: x2a-source-pvc
  namespace: rhdh
  labels:
    app: x2a
spec:
  accessModes:
    - ReadWriteOnce  # Jobs run sequentially, so RWO is sufficient
  resources:
    requests:
      storage: 5Gi
  # storageClassName is inherited from cluster default

---
# Secret for X2A system credentials
# These are shared across all jobs and users
apiVersion: v1
kind: Secret
metadata:
  name: x2a-secrets
  namespace: rhdh
  labels:
    app: x2a
type: Opaque
stringData:
  # LLM Configuration
  llm-model: "meta/llama-3.3-70b-instruct-maas"
  openai-api-base: "https://us-central1-aiplatform.googleapis.com/v1/projects/rhdh-orchestrator-ai/locations/us-central1/endpoints/openapi"
  vertexai-project: "rhdh-orchestrator-ai"
  log-level: "DEBUG"
  langchain-debug: "FALSE"
  recursion-limit: "900"
  max-export-attempts: "80"

  # GitHub token for publishing (optional, only needed for publish phase)
  github-token: "REPLACE_WITH_YOUR_GITHUB_TOKEN"

  # AAP Integration
  aap-controller-url: "https://aap-aap.apps.cluster-fw6zz-1.dynamic.redhatworkshops.io/"
  aap-org-name: "Default"

  # AAP Auth - Option A: Basic Auth
  aap-username: "admin"
  aap-password: "REPLACE_WITH_YOUR_AAP_PASSWORD"

  # AAP Auth - Option B: Token Auth (leave empty if using basic auth)
  aap-oauth-token: ""

  # AAP TLS Configuration
  # If using self-signed cert, provide the CA bundle content (PEM format)
  aap-ca-bundle: ""
  aap-verify-ssl: "true"
